# 短字符类型介绍

CHAR和VARCHAR类型都可以存储比较短的字符串

| 字符串(文本) | 特点     | 长度 | 长度范围（字符）           | 存储空间                  |
| ------------ | -------- | ---- | -------------------------- | ------------------------- |
| CHAR(M)      | 固定长度 | M    | `0 <= M <= 255`            | M*4个字节（utf8mb4）      |
| VARCHAR(M)   | 可变长度 | M    | MySql一行数据最多65535字节 | (M*4+1) 个字节（utf8mb4） |

CHAR(M) 类型一般需要预先定义字符串长度。如果不指定(M)，则表示长度默认是1个字符。 

保存数据的实际长度比CHAR类型声明的长度小，则会在右侧填充空格以达到指定的长度。 

当MySQL检索CHAR类型的数据时，CHAR类型的字段会去除尾部的空格。

> M是字符最大长度限制，超过会报错，不超过会用空格填充，总之就是固定长度。
>
> CHAR(M)类型存储空间大小和字符集相关，比如，utf8mb4一个字符占4个字节，那么它的存储空间就是255*4字节。
>
> 固定长度且小于255的，都可以用。
>
> CHAR(M) 性能较好，因为内部不需要做伸缩运算。

VARCHAR(M) 定义时，必须指定长度M，否则报错。 

MySQL4.0版本以下，varchar(20)：指的是20字节，如果存放UTF8汉字时，只能存6个（每个汉字3字节）； 

MySQL5.0版本以上，varchar(20)：指的是20字符。 

检索VARCHAR类型的字段数据时，会保留数据尾部的空格。

> VARCHAR(M)可变长度，指会根据内容伸缩最终存储空间。
>
> VARCHAR(M)的M（字符最大长度限制），理论上没有最大限制，但MySQL限定一行数据最多不能超过65535字节，即utf8mb4一个字符占4个字节为例，M最大值不能超过65535/4。
>
> VARCHAR(M)存储空间大小受MySQL限定，它的存储空间是65535+1字节，65535是MySQL规定的存储数据的最大字节数，+1 表示VARCHAR(M)类型可能为空，这个字节是用来记录VARCHAR(M)是否为空的。
>
> CHAR(M)类型永远不可能为空，它会自动补全。
>
> VARCHAR(M) 性能一般，因为内部需要做伸缩运算。

通过显示将各种字符串值存储到 CHAR(4) and VARCHAR(4) 列的结果（假设使用单字节字符集，如 latin1 ）说明 和 VARCHAR 之间的 CHAR 差异。

| 插入值 | CHAR(4) | 所需存储 | VARCHAR(4) | 所需存储 |
| ------ | ------- | -------- | ---------- | -------- |
| ''     | '     ' | 4 bytes  | ''         | 1 byte   |
| 'ab'   | 'ab  '  | 4 bytes  | 'ab'       | 3 bytes  |
| 'abcd' | 'abcd'  | 4 bytes  | 'abcd'     | 5 bytes  |