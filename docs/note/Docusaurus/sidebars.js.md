# sidebars.js

`sidebars.js` 是 Docusaurus 用来定义文档侧边栏结构的重要配置文件。通过配置 `sidebars.js`，你可以灵活地组织文档，使其在侧边栏中以分类、子分类的方式展示。下面我将详细讲解 `sidebars.js` 中的各种配置选项，包括 `dirName`、`items`、`type` 等。

### 基础结构

`sidebars.js` 是一个模块，通常包含一个或多个侧边栏的配置。每个侧边栏包含多个项目（`items`），这些项目可以是文档、分组（category）或者外部链接。

#### 示例 `sidebars.js`：

```js
module.exports = {
  tutorialSidebar: [
    {
      type: 'category',
      label: 'Getting Started',
      items: ['intro', 'getting-started'],
    },
    {
      type: 'category',
      label: 'Guides',
      items: [
        'guides/installation',
        'guides/usage',
      ],
    },
  ],
};
```

上面的 `tutorialSidebar` 由两个分类组成，分别是 `Getting Started` 和 `Guides`，每个分类下包含多个文档项（通过文档的 `id` 引用）。

### `sidebars.js` 的核心配置

#### 1. `type`
`type` 定义了侧边栏项目的类型，可以是以下几种类型：

- **`doc`**：单个文档。
- **`category`**：文档分类，包含多个文档或子分类。
- **`link`**：外部链接或站内页面的链接。
- **`autogenerated`**：自动根据文件系统生成分类和文档。

##### `doc` 示例：

```js
{
  type: 'doc',
  id: 'intro',  // 对应 `docs/intro.md`
}
```

`doc` 类型引用一个单个文档，通过 `id` 引用文档，`id` 通常是文件名（但可以在 Markdown 文件中手动指定）。

##### `category` 示例：

```js
{
  type: 'category',
  label: 'Guides',
  items: [
    'guides/installation',  // 引用文档
    'guides/usage',         // 引用文档
  ],
}
```

`category` 类型用于创建文档的分类，`label` 是该分类在侧边栏中显示的名称，`items` 是此分类下的文档或子分类。

##### `link` 示例：

```js
{
  type: 'link',
  label: 'External Resource',
  href: 'https://example.com',  // 外部链接地址
}
```

`link` 类型用于创建指向外部网站或站内其他页面的链接。

##### `autogenerated` 示例：

```js
{
  type: 'autogenerated',
  dirName: 'guides',  // 自动生成 `docs/guides/` 目录下的侧边栏
}
```

`autogenerated` 类型会自动扫描指定目录下的文档并生成侧边栏结构，`dirName` 是该目录的路径。

#### 2. `items`
`items` 是侧边栏中的内容，可以是文档（`doc`）、分类（`category`）、链接（`link`）等多种类型的组合。你可以灵活地嵌套分类和文档。

##### 示例：

```js
{
  type: 'category',
  label: 'Main Category',
  items: [
    'doc1',  // 引用文档
    {
      type: 'category',
      label: 'Sub Category',
      items: ['doc2', 'doc3'],  // 子分类中的文档
    },
    {
      type: 'link',
      label: 'Go to Google',
      href: 'https://google.com',
    },
  ],
}
```

`items` 中可以同时包含文档、子分类和外部链接，提供了很大的灵活性。

#### 3. `dirName`

`dirName` 是 `autogenerated` 类型中特有的配置项，指定了 Docusaurus 自动生成文档和分类的文件夹路径。它可以帮助你根据文件系统的目录结构自动生成侧边栏。

##### 示例：

```js
{
  type: 'autogenerated',
  dirName: 'guides',  // 自动生成 `docs/guides/` 目录下的侧边栏
}
```

如果 `dirName` 是 `.`，则会自动生成整个 `docs` 目录的侧边栏。

#### 4. `label`

`label` 用于指定分类或链接在侧边栏中的显示名称。

##### 示例：

```js
{
  type: 'category',
  label: 'My Category',  // 显示为 "My Category"
  items: ['doc1', 'doc2'],
}
```

#### 5. `collapsed` 和 `collapsible`

这些选项用于控制分类在侧边栏中的折叠行为。

- **`collapsed`**：控制分类在页面加载时是否默认折叠。
- **`collapsible`**：控制分类是否可以折叠。

##### 示例：

```js
{
  type: 'category',
  label: 'Advanced Topics',
  items: ['doc1', 'doc2'],
  collapsed: true,  // 默认折叠
  collapsible: true,  // 分类可以折叠
}
```

当 `collapsed` 设置为 `true` 时，分类在页面初始加载时是折叠的。`collapsible` 控制是否允许分类在侧边栏中折叠或展开。

#### 6. `href`

`href` 是 `link` 类型中特有的配置，用于指定外部链接或站内其他页面的 URL。

##### 示例：

```js
{
  type: 'link',
  label: 'GitHub',
  href: 'https://github.com',  // 指向外部链接
}
```

你可以通过 `href` 创建指向其他站点或外部资源的链接。

### `sidebars.js` 示例总结

下面是一个综合使用了多种类型的 `sidebars.js` 配置示例：

```js
module.exports = {
  tutorialSidebar: [
    {
      type: 'category',
      label: 'Getting Started',
      items: ['intro', 'getting-started'],  // 文档项
    },
    {
      type: 'category',
      label: 'Guides',
      items: [
        'guides/installation',  // 文档项
        'guides/usage',         // 文档项
      ],
      collapsed: false,  // 默认展开
      collapsible: true,  // 允许折叠
    },
    {
      type: 'category',
      label: 'API Documentation',
      items: [
        {
          type: 'autogenerated',
          dirName: 'api',  // 自动生成 `docs/api` 下的文档
        },
      ],
    },
    {
      type: 'link',
      label: 'GitHub',
      href: 'https://github.com',  // 外部链接
    },
  ],
};
```

- **`Getting Started`** 和 **`Guides`** 是手动定义的分类，里面包含具体的文档。
- **`API Documentation`** 是通过 `autogenerated` 自动生成的分类，Docusaurus 会根据 `docs/api` 目录中的内容自动生成其结构。
- 最后的 `GitHub` 是一个指向 GitHub 的外部链接。

### 自动生成 vs 手动配置

- **手动配置**：通过显式定义 `items`，可以对文档的顺序、分类、嵌套进行精细化的控制。
- **自动生成**：使用 `autogenerated` 可以根据文件系统的目录结构自动生成侧边栏，适用于较大或动态变化的文档项目，减少手动维护的工作量。

### 如何选择配置方式？

- 如果你的文档结构非常复杂，需要多级分类或有特定的展示顺序，使用手动配置的 `category` 和 `doc`。
- 如果你希望 Docusaurus 自动维护文档结构，尤其是在频繁添加新文档时，使用 `autogenerated` 自动生成侧边栏会更方便。

通过这些配置选项，你可以灵活地管理和展示 Docusaurus 文档的侧边栏，并根据文档内容动态生成导航结构，极大提升用户的浏览体验。